clear all; close all; clc;

%%
% CLEANED DATA (COMPLETE)

clear all; close all; clc;
hold_on_flag = true;

load('data/GPS_DATA_0716_01_CLEANED_CELL.mat')

geoplot_with_index_section(PTS_CLEANED_ALL_cell, 'g.', 1, 'Whole Lines' )

geoplot_with_index_section(PTS_CLEANED_ALL_cell, 'g.', 2, 'Whole Lines' )

% FILLING (COMPLETE)

load('data/GPS_DATA_0716_04_FILL_CELL.mat')

hold on;
geoplot_with_index_section(PTS_FILL_sect_ALL_cell, 'g.', 2, 'Whole Lines' )

% STOP LINES (COMPLETE)

load('data/GPS_DATA_0716_02_STOP_LINES_CELL.mat')

geoplot_with_index_section(PTS_STOP_LINES_ALL_cell, 'g.', 3, 'Stop Lines' )

% PARKING LOTS (COMPLETE)

load('data/GPS_DATA_0716_03_PARKING_LOTS_CELL.mat')

geoplot_with_index_section(PTS_PARKING_ALL_cell, 'g.', 4, 'Parking Lots' )



% Processing

WHOLE_ALL{1,1} = PTS_CLEANED_ALL_cell(766:2854, :);
WHOLE_ALL{2,1} = PTS_CLEANED_ALL_cell(2855:4763, :);
WHOLE_ALL{3,1} = PTS_CLEANED_ALL_cell(4764:6763, :);

WHOLE_ALL{4,1} = PTS_CLEANED_ALL_cell(6764:7633, :);
WHOLE_ALL{5,1} = PTS_CLEANED_ALL_cell(7634:8370, :);
WHOLE_ALL{6,1} = PTS_CLEANED_ALL_cell(8371:10303, :);
WHOLE_ALL{7,1} = PTS_CLEANED_ALL_cell(10304:10833, :);
WHOLE_ALL{8,1} = PTS_CLEANED_ALL_cell(30153:30441, :);
WHOLE_ALL{9,1} = PTS_CLEANED_ALL_cell(11163:11584, :);
WHOLE_ALL{10,1} = PTS_CLEANED_ALL_cell(11585:12756, :);
WHOLE_ALL{11,1} = PTS_CLEANED_ALL_cell(12757:13208, :);
WHOLE_ALL{12,1} = PTS_CLEANED_ALL_cell(60450:61584, :);
WHOLE_ALL{13,1} = PTS_CLEANED_ALL_cell(13209:13594, :);
WHOLE_ALL{14,1} = PTS_CLEANED_ALL_cell(13595:14954, :);
WHOLE_ALL{15,1} = flip(PTS_FILL_sect_ALL_cell(1833:1918, :));
WHOLE_ALL{16,1} = PTS_CLEANED_ALL_cell(33336:33855, :);
WHOLE_ALL{17,1} = PTS_CLEANED_ALL_cell(33856:34099, :);
WHOLE_ALL{18,1} = PTS_CLEANED_ALL_cell(34100:34239, :);
WHOLE_ALL{19,1} = [ PTS_CLEANED_ALL_cell(34240:34821, :); ...
                    PTS_FILL_sect_ALL_cell(592:638, :) ];
WHOLE_ALL{20,1} = PTS_FILL_sect_ALL_cell(639:718, :);


WHOLE_ALL{21,1} = PTS_CLEANED_ALL_cell(25856:26312, :);
WHOLE_ALL{22,1} = PTS_CLEANED_ALL_cell(26313:27693, :);
WHOLE_ALL{23,1} = PTS_CLEANED_ALL_cell(27694:29049, :);

WHOLE_ALL{24,1} = PTS_CLEANED_ALL_cell(29050:29627, :);
WHOLE_ALL{25,1} = PTS_FILL_sect_ALL_cell(919:1038, :);
WHOLE_ALL{26,1} = PTS_CLEANED_ALL_cell(71552:72087, :);
WHOLE_ALL{27,1} = PTS_CLEANED_ALL_cell(83108:83809, :);
WHOLE_ALL{28,1} = PTS_CLEANED_ALL_cell(83810:84820, :);
WHOLE_ALL{29,1} = PTS_CLEANED_ALL_cell(72088:72836, :);
WHOLE_ALL{30,1} = PTS_CLEANED_ALL_cell(87799:90156, :);
WHOLE_ALL{31,1} = PTS_CLEANED_ALL_cell(90157:90314, :); % STOP LINE
WHOLE_ALL{32,1} = PTS_CLEANED_ALL_cell(90330:91201, :);
WHOLE_ALL{33,1} = PTS_CLEANED_ALL_cell(91357:91523, :); % STOP LINE
WHOLE_ALL{34,1} = PTS_CLEANED_ALL_cell(91672:94906, :);
WHOLE_ALL{35,1} = PTS_CLEANED_ALL_cell(75470:75579, :);
WHOLE_ALL{36,1} = PTS_CLEANED_ALL_cell(73991:75458, :);
WHOLE_ALL{37,1} = PTS_CLEANED_ALL_cell(24030:25436, :);
WHOLE_ALL{38,1} = PTS_CLEANED_ALL_cell(25437:25702, :);
WHOLE_ALL{39,1} = flip(PTS_FILL_sect_ALL_cell(1339:1438, :));
WHOLE_ALL{40,1} = PTS_FILL_sect_ALL_cell(1439:1538, :);
WHOLE_ALL{41,1} = PTS_CLEANED_ALL_cell(54285:54377, :); % STOP LINE
WHOLE_ALL{42,1} = PTS_CLEANED_ALL_cell(45614:45809, :); % STOP LINE
% WHOLE_ALL{41,1} = PTS_CLEANED_ALL_cell(54385:54820, :);
WHOLE_ALL{43,1} = PTS_CLEANED_ALL_cell(54917:55292, :);
WHOLE_ALL{44,1} = PTS_CLEANED_ALL_cell(55293:56879, :);
WHOLE_ALL{45,1} = PTS_CLEANED_ALL_cell(59376:59457, :); % STOP LINE
WHOLE_ALL{46,1} = [ PTS_CLEANED_ALL_cell(59470:59726, :); ...
                    PTS_CLEANED_ALL_cell(61820:62195, :) ];
WHOLE_ALL{47,1} = PTS_CLEANED_ALL_cell(62196:62427, :); % STOP LINE
WHOLE_ALL{48,1} = PTS_CLEANED_ALL_cell(62520:62630, :);
WHOLE_ALL{49,1} = PTS_CLEANED_ALL_cell(62631:63227, :);
WHOLE_ALL{50,1} = PTS_CLEANED_ALL_cell(63228:63463, :);


WHOLE_ALL{51,1} = flip(PTS_FILL_sect_ALL_cell(719:818, :));
WHOLE_ALL{52,1} = flip(PTS_CLEANED_ALL_cell(46299:47301, :));
WHOLE_ALL{53,1} = flip(PTS_CLEANED_ALL_cell(47302:48528, :));
WHOLE_ALL{54,1} = flip(PTS_CLEANED_ALL_cell(48529:48826, :));
WHOLE_ALL{55,1} = flip(PTS_CLEANED_ALL_cell(48827:49000, :));
WHOLE_ALL{56,1} = flip(PTS_FILL_sect_ALL_cell(819:918, :));
WHOLE_ALL{57,1} = flip(PTS_CLEANED_ALL_cell(49001:49259, :));
WHOLE_ALL{58,1} = flip(PTS_CLEANED_ALL_cell(49260:49581, :));
WHOLE_ALL{59,1} = flip(PTS_CLEANED_ALL_cell(49582:49875, :));
WHOLE_ALL{60,1} = flip(PTS_CLEANED_ALL_cell(49876:50019, :));
WHOLE_ALL{61,1} = flip(PTS_CLEANED_ALL_cell(52726:53306, :));
WHOLE_ALL{62,1} = [ flip(PTS_CLEANED_ALL_cell(52146:52727, :)); ...
                      PTS_CLEANED_ALL_cell(16369:16843, :) ];
WHOLE_ALL{63,1} = PTS_FILL_sect_ALL_cell(1919:2018, :);
WHOLE_ALL{64,1} = PTS_CLEANED_ALL_cell(15670:16054, :);
WHOLE_ALL{65,1} = [ PTS_CLEANED_ALL_cell(16055:16155, :); ...
                    PTS_CLEANED_ALL_cell(68662:69704, :); ...
                    flip(PTS_CLEANED_ALL_cell(50074:50288, :)) ];
WHOLE_ALL{66,1} = PTS_CLEANED_ALL_cell(59838:59919, :); % STOP LINE
WHOLE_ALL{67,1} = PTS_CLEANED_ALL_cell(59924:59996, :); % STOP LINE
WHOLE_ALL{68,1} = PTS_CLEANED_ALL_cell(81749:82455, :);
WHOLE_ALL{69,1} = [ PTS_CLEANED_ALL_cell(82456:82705, :); ...
                    PTS_FILL_sect_ALL_cell(1739:1832, :) ];
WHOLE_ALL{70,1} = PTS_FILL_sect_ALL_cell(1239:1338, :);
WHOLE_ALL{71,1} = flip(PTS_CLEANED_ALL_cell(78298:79009, :));
WHOLE_ALL{72,1} = flip(PTS_FILL_sect_ALL_cell(272:591, :));
WHOLE_ALL{73,1} = PTS_FILL_sect_ALL_cell(1:81, :);
WHOLE_ALL{74,1} = PTS_FILL_sect_ALL_cell(81:216, :);
WHOLE_ALL{75,1} = [PTS_FILL_sect_ALL_cell(217:271, :); ...
                   flip(PTS_CLEANED_ALL_cell(54212:54284, :))];
WHOLE_ALL{76,1} = flip(PTS_CLEANED_ALL_cell(54130:54213, :));
WHOLE_ALL{77,1} = PTS_FILL_sect_ALL_cell(2471:2768, :);


WHOLE_ALL{78,1} = flip(PTS_CLEANED_ALL_cell(45833:46298, :));
WHOLE_ALL{79,1} = flip(PTS_FILL_sect_ALL_cell(1139:1237, :));
WHOLE_ALL{80,1} = flip(PTS_CLEANED_ALL_cell(78004:78297, :)); % STOP LINE
WHOLE_ALL{81,1} = PTS_CLEANED_ALL_cell(76564:78003, :);
WHOLE_ALL{82,1} = PTS_CLEANED_ALL_cell(84830:87580, :); % DELIVERY
WHOLE_ALL{83,1} = PTS_CLEANED_ALL_cell(72840:73078, :); % STOP LINE
WHOLE_ALL{84,1} = PTS_CLEANED_ALL_cell(73121:73296, :);
WHOLE_ALL{85,1} = PTS_CLEANED_ALL_cell(73297:73836, :);
WHOLE_ALL{86,1} = PTS_CLEANED_ALL_cell(73837:73990, :);


WHOLE_ALL{87,1} = flip(PTS_FILL_sect_ALL_cell(1639:1738, :));
WHOLE_ALL{88,1} = PTS_CLEANED_ALL_cell(79689:79897, :);
WHOLE_ALL{89,1} = PTS_CLEANED_ALL_cell(79899:81628, :);
WHOLE_ALL{90,1} = flip(PTS_FILL_sect_ALL_cell(1539:1638, :));
WHOLE_ALL{91,1} = PTS_FILL_sect_ALL_cell(1039:1138, :);
WHOLE_ALL{92,1} = PTS_CLEANED_ALL_cell(67185:67368, :);
WHOLE_ALL{93,1} = PTS_CLEANED_ALL_cell(63896:64122, :); % STOP LINE
WHOLE_ALL{94,1} = PTS_CLEANED_ALL_cell(67369:68109, :);
WHOLE_ALL{95,1} = PTS_CLEANED_ALL_cell(63468:63662, :);
WHOLE_ALL{96,1} = PTS_CLEANED_ALL_cell(64232:65256, :);
WHOLE_ALL{97,1} = PTS_CLEANED_ALL_cell(30751:31686, :);
WHOLE_ALL{98,1} = PTS_CLEANED_ALL_cell(31687:33335, :);
WHOLE_ALL{99,1} = PTS_CLEANED_ALL_cell(59999:60108, :); % STOP LINE
WHOLE_ALL{100,1} = [ PTS_FILL_sect_ALL_cell(2019:2068, :); ...
                   PTS_CLEANED_ALL_cell(29718:30152, :) ];
WHOLE_ALL{101,1} = PTS_CLEANED_ALL_cell(71308:71551, :);
WHOLE_ALL{102,1} = PTS_FILL_sect_ALL_cell(2069:2168, :);
WHOLE_ALL{103,1} = PTS_FILL_sect_ALL_cell(2169:2268, :);
WHOLE_ALL{104,1} = PTS_FILL_sect_ALL_cell(2269:2368, :);
WHOLE_ALL{105,1} = PTS_CLEANED_ALL_cell(19307:19719, :);
WHOLE_ALL{106,1} = PTS_CLEANED_ALL_cell(19720:19958, :);
WHOLE_ALL{107,1} = PTS_CLEANED_ALL_cell(19959:20396, :);
WHOLE_ALL{108,1} = PTS_CLEANED_ALL_cell(20397:20691, :);
WHOLE_ALL{109,1} = PTS_CLEANED_ALL_cell(20692:21498, :);
WHOLE_ALL{110,1} = PTS_CLEANED_ALL_cell(21499:21868, :);
WHOLE_ALL{111,1} = PTS_CLEANED_ALL_cell(21869:22149, :);
WHOLE_ALL{112,1} = PTS_CLEANED_ALL_cell(22150:22932, :);
WHOLE_ALL{113,1} = PTS_FILL_sect_ALL_cell(2369:2467, :);
WHOLE_ALL{114,1} = PTS_CLEANED_ALL_cell(17719:17860, :); % PARKING LOT
WHOLE_ALL{115,1} = PTS_CLEANED_ALL_cell(17861:18033, :); % PARKING LOT
WHOLE_ALL{116,1} = PTS_CLEANED_ALL_cell(18034:18145, :); % PARKING LOT
WHOLE_ALL{117,1} = PTS_CLEANED_ALL_cell(18146:18283, :); % PARKING LOT
WHOLE_ALL{118,1} = PTS_CLEANED_ALL_cell(18284:18380, :); % PARKING LOT
WHOLE_ALL{119,1} = PTS_CLEANED_ALL_cell(18381:18487, :); % PARKING LOT
WHOLE_ALL{120,1} = PTS_CLEANED_ALL_cell(18488:18593, :); % PARKING LOT
WHOLE_ALL{121,1} = PTS_CLEANED_ALL_cell(18594:18721, :); % PARKING LOT
WHOLE_ALL{122,1} = PTS_CLEANED_ALL_cell(18722:18794, :); % PARKING LOT
WHOLE_ALL{123,1} = PTS_CLEANED_ALL_cell(18795:18875, :); % PARKING LOT
WHOLE_ALL{124,1} = PTS_CLEANED_ALL_cell(18876:18979, :); % PARKING LOT
WHOLE_ALL{125,1} = PTS_CLEANED_ALL_cell(18980:19062, :); % PARKING LOT
WHOLE_ALL{126,1} = PTS_CLEANED_ALL_cell(19063:19145, :); % PARKING LOT
WHOLE_ALL{127,1} = PTS_FILL_sect_22(1:300, :);
WHOLE_ALL{128,1} = PTS_FILL_sect_23(1:300, :);
WHOLE_ALL{129,1} = PTS_FILL_sect_24(1:100, :);
WHOLE_ALL{130,1} = PTS_FILL_sect_25(1:7, :);
WHOLE_ALL{131,1} = PTS_FILL_sect_26(1:8, :);
WHOLE_ALL{132,1} = PTS_FILL_sect_27(1:20, :);
WHOLE_ALL{133,1} = PTS_FILL_sect_28(1:10, :);
WHOLE_ALL{134,1} = PTS_FILL_sect_29(1:2, :);


colors = ["r."; "b."; "c."; "m."; "y."; "k."];
% [row_c, col_c] = size(colors); 

% colors = ["r."; "g."; "b."; "c."; "m."; "y."; "k."];
% [row, col] = size(WHOLE_ALL);

% for i = 1 : size(WHOLE_ALL,1)
%     for j = 1 : size(WHOLE_ALL{i,1},1)
%         WHOLE_ALL{i,1}{j,3} = { strcat('SECTION_', num2str(i)) };
%     end
% end
% 
% geoplot_with_index_section(WHOLE_ALL{1, 1}, colors(1), 2, 'Whole Lines' )

for i = 1 : size(WHOLE_ALL, 1)
% for i = 127 : size(WHOLE_ALL, 1)

    if i ~= 1
        hold on;
    end
    for j = 1 : size(WHOLE_ALL{i,1},1)
        WHOLE_ALL{i,1}{j,3} = { strcat('Section-', num2str(i)) };
    end
    geoplot_with_index_section(WHOLE_ALL{i, 1}, colors(mod(i-1, size(colors,1)) + 1), 2, 'Whole Lines' )
end



%% processing %%%%%%%%%%% NO USE %%%%%%%%%%

WHOLE_ONECELL = { PTS_CLEANED_ALL_cell };

WHOLE_ALL_CELL = { PTS_CLEANED_01_cell; ...
                   PTS_CLEANED_02_cell; ...
                   PTS_CLEANED_03_cell; ...
                   PTS_CLEANED_04_cell; ...
                   PTS_CLEANED_05_cell; ...
                   PTS_CLEANED_06_cell; ...
                   PTS_CLEANED_07_cell; ...
                   PTS_CLEANED_08_cell; ...
                   PTS_CLEANED_09_cell; ...
                   PTS_CLEANED_10_cell; ...
                   PTS_CLEANED_11_cell; ...
                   PTS_CLEANED_12_cell; ...
                   PTS_CLEANED_13_cell; ...
                   PTS_CLEANED_14_cell; ...
                   PTS_CLEANED_15_cell; ...
                   PTS_CLEANED_16_cell; ...
                   PTS_CLEANED_17_cell; ...
                   PTS_CLEANED_18_cell; ...
                   PTS_CLEANED_19_cell; ...
                   PTS_CLEANED_20_cell; ...
                   PTS_CLEANED_21_cell; ...
                   PTS_CLEANED_22_cell; ...
                   PTS_CLEANED_23_cell; ...
                   PTS_CLEANED_24_cell; ...
                   PTS_CLEANED_25_cell; ...
                   PTS_CLEANED_26_cell; ...
                   PTS_CLEANED_27_cell; ...
                   PTS_CLEANED_28_cell; ...
                   PTS_CLEANED_29_cell; ...
                   PTS_CLEANED_30_cell; ...
                   PTS_CLEANED_31_cell; ...
                   PTS_CLEANED_32_cell; ...
                   PTS_CLEANED_33_cell; ...
                   PTS_CLEANED_34_cell; ...
                   PTS_CLEANED_35_cell; ...
                   PTS_CLEANED_36_cell; ...
                   PTS_CLEANED_37_cell; ...
                   PTS_CLEANED_38_cell; ...
                   PTS_CLEANED_39_cell; ...
                   PTS_CLEANED_40_cell; ...
                   PTS_CLEANED_41_cell; ...
                   PTS_CLEANED_42_cell; ...
                   PTS_CLEANED_43_cell; ...
                   PTS_CLEANED_44_cell; ...
                   PTS_CLEANED_45_cell; ...
                   PTS_CLEANED_46_cell; ...
                   PTS_CLEANED_47_cell; ...
                   PTS_CLEANED_48_cell; ...
                   PTS_CLEANED_49_cell; ...
                   PTS_CLEANED_50_cell; ...
                   PTS_CLEANED_51_cell; ...
                   PTS_CLEANED_52_cell; ...
                   PTS_CLEANED_53_cell; ...
                   PTS_CLEANED_54_cell; ...
                   PTS_CLEANED_55_cell; ...
                   PTS_CLEANED_56_cell; ...
                   PTS_CLEANED_57_cell; ...
                   PTS_CLEANED_58_cell; ...
                   PTS_CLEANED_59_cell;
                 };

STOP_ALL_CELL = { PTS_STOP_LINE_01_cell; ...
                  PTS_STOP_LINE_02_cell; ...
                  PTS_STOP_LINE_03_cell; ...
                  PTS_STOP_LINE_04_cell; ...
                  PTS_STOP_LINE_05_cell; ...
                  PTS_STOP_LINE_06_cell; ...
                  PTS_STOP_LINE_07_cell; ...
                  PTS_STOP_LINE_08_cell; ...
                  PTS_STOP_LINE_09_cell; ...
                  PTS_STOP_LINE_10_cell; ...
                  PTS_STOP_LINE_11_cell; ...
                  PTS_STOP_LINE_12_cell; ...
                  PTS_STOP_LINE_13_cell; ...
                  PTS_STOP_LINE_14_cell; ...
                  PTS_STOP_LINE_15_cell; ...
                  PTS_STOP_LINE_16_cell; ...
                  PTS_STOP_LINE_17_cell; ...
                  PTS_STOP_LINE_18_cell; ...
                };

PARK_ALL_CELL = { PTS_PARKING_01_cell; ...
                  PTS_PARKING_02_cell; ...
                  PTS_PARKING_03_cell; ...
                  PTS_PARKING_04_cell; ...
                  PTS_PARKING_05_cell; ...
                  PTS_PARKING_06_cell; ...
                  PTS_PARKING_07_cell; ...
                  PTS_PARKING_08_cell; ...
                  PTS_PARKING_09_cell; ...
                  PTS_PARKING_10_cell; ...
                  PTS_PARKING_11_cell; ...
                  PTS_PARKING_12_cell; ...
                  PTS_PARKING_13_cell;
                };


WP = struct( 'WHOLE'        , {WHOLE_ALL_CELL}, ...
             'WHOLE_ONECELL', {WHOLE_ONECELL} , ...
             'STOP'         , {STOP_ALL_CELL} , ...
             'PARK'         , {PARK_ALL_CELL}   ...
           );